#### 命令模式定义：

命令模式（Command Pattern）是一种数据驱动的设计模式，它属于行为型模式。请求以命令的形式包裹在对象中，并传给调用对象。调用对象寻找可以处理该命令的合适的对象，并把该命令传给相应的对象，该对象执行命令。 可以对请求进行记录、撤销或重做、事务等处理。

不同的语言有不同的解释差别在JS中可以说： 命令模式是一种回调的面向对象实现。



#### 实现过程：

1. V1:

   配置输入：根据不同的图形配置不同的配置参数，当使用鼠标在画板上面画画的时候，取出不同图形的配置然后执行画图回调函数进行渲染， 缺点就是使用过多的if分支判断。

   ![image-20220227222054316](/Users/mac/Library/Application Support/typora-user-images/image-20220227222054316.png)

2. V2

   命令输入:  在画笔回调事件与画笔引用、事件引用、图形类型之间增加一层中间层， 我们可以让画笔控制画板中的不同的图形类型进行渲染。这一层中间层就是Command类。在这种情况我们只需要关心怎么生产Command对象即可。

   ![image-20220227222343345](/Users/mac/Library/Application Support/typora-user-images/image-20220227222343345.png)

3. V3

   利用单例模式实现一个命令流，并在其之上实现调度接口。一部分的类只管产生一系类的命令存入这个流中。另外一些类只负责消费这个队列。通过这一层数据流则达到了直接解耦消费者和生产者的目的。

   ![image-20220227222126692](/Users/mac/Library/Application Support/typora-user-images/image-20220227222126692.png)

   并且在调度器之上我们可以做掉撤销和重做功能，同时这也是命令模式的常用使用场景，使用命令模式做到这一个易如反掌。

   ![image-20220227222138977](/Users/mac/Library/Application Support/typora-user-images/image-20220227222138977.png)

4. V-next

   使用继承抽象类（慎用）来定义不同的命令，从而将选择橡皮命令和画图命令之间解耦，给了我们很大的灵活度， 让我们可以对不同的画笔类型进行不同行为的操作，或者说不同画笔行为的混合，颜色填充、描边、喷枪？甚至发挥一下我们的想象力，我们可以为画笔加上更加智能的特效，在新手教程阶段来上一段画笔自动画画的演示效果。

   



